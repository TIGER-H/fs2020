{"version":3,"sources":["components/Person.js","components/Filter.js","components/PersonForm.js","services/pb.js","Notification.js","App.js","index.js"],"names":["Person","person","toggleDelete","name","number","onClick","Filter","value","onChange","PesonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","error","className","App","useState","persons","setPersons","setNewName","setNewNumber","toShow","setToShow","setMessage","errMessage","setErrMessage","useEffect","pbService","initPbs","messageCountDown","timeout","setTimeout","personsToShow","filter","toLowerCase","includes","event","target","PersonForm","preventDefault","map","window","confirm","find","index","findIndex","copy","splice","catch","JSON","stringify","returnedPb","concat","console","log","p","err","toggleDeleteOf","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9c79412e.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = ({ person,toggleDelete }) => {\r\n    // console.log(persons)\r\n    // console.log(persons.name)\r\n    // const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\r\n    // console.log(test)\r\n    return (\r\n        <div>\r\n            {person.name} {person.number}\r\n            <button onClick={toggleDelete}>Delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","import React from \"react\";\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n    return (\r\n        <div>\r\n            filter shown with\r\n            <input value={value} onChange={onChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from \"react\";\r\n\r\nconst PesonForm = ({addName, newName, handleNameChange,newNumber, handleNumberChange}) => {\r\n    return (\r\n        <form onSubmit={addName}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PesonForm","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deleteOne = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n//   console.log(request); //--fulfilled\r\n  return request.then(response =>response.data);\r\n};\r\n\r\nexport default { getAll, create, update, deleteOne };\r\n","const Notification = ({ message, error = false }) => {\r\n  if (message === null) return null;\r\n  return <div className={error ? \"error\" : \"success\"}>{message}</div>;\r\n};\r\nexport default Notification","import React, { useState, useEffect } from \"react\";\r\nimport Person from \"./components/Person\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport pbService from \"./services/pb\";\r\nimport Notification from \"./Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [toShow, setToShow] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [errMessage, setErrMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    pbService.getAll().then((initPbs) => {\r\n      setPersons(initPbs);\r\n    });\r\n  }, []);\r\n\r\n  const messageCountDown = (message, error = false, timeout=5000) => {\r\n    error ? setErrMessage(message) : setMessage(message)\r\n    setTimeout(() => {\r\n      error ? setErrMessage(null) : setMessage(null)\r\n    }, timeout);\r\n  }\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n    // console.log(newName)\r\n    // console.log(persons.map(person => person.name))\r\n    // const names = persons.map(person => person.name)\r\n    if (persons.map((person) => person.name).includes(newName)) {\r\n      if (\r\n        window.confirm(`${newName} is alreay added to phonebook, replace it?`)\r\n      ) {\r\n        pbService\r\n          .update(persons.find((person) => person.name === newName).id, {\r\n            name: newName,\r\n            number: newNumber,\r\n          })\r\n          .then((response) => {\r\n            let index = persons.findIndex(\r\n              (person) => person.id === response.id\r\n            );\r\n            let copy = [...persons];\r\n            copy.splice(index, 1, response);\r\n            setPersons(copy);\r\n            messageCountDown(`${newName} has been replaced.`)\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n          })\r\n          .catch(error => {\r\n            messageCountDown(JSON.stringify(error.response.data), true)\r\n            // messageCountDown(, true)\r\n          })\r\n      }\r\n      setNewName('')\r\n      setNewNumber('')\r\n    } else {\r\n      const nameObject = {\r\n        name: newName,\r\n        number: newNumber,\r\n      };\r\n      pbService\r\n      .create(nameObject)\r\n      .then((returnedPb) => {\r\n        setPersons(persons.concat(returnedPb));\r\n        messageCountDown(`New name : ${returnedPb.name} has been added`)\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      })\r\n      .catch(error => {\r\n        setNewName('')\r\n        setNewNumber('')\r\n        messageCountDown(JSON.stringify(error.response.data), true)\r\n        console.log(error.response.data);\r\n      })\r\n    }\r\n  };\r\n\r\n  const toggleDeleteOf = (person) => {\r\n    if (window.confirm(`delete ${person.name} ?`)) {\r\n      pbService\r\n      .deleteOne(person.id)\r\n      .then((response) => {\r\n        setPersons(persons.filter((p) => p.id !== person.id));\r\n        messageCountDown(`${person.name} has already been deleted`, true)\r\n      })//what to catch ?\r\n      .catch(err => {\r\n        console.log(err);\r\n      })\r\n    }\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewName(event.target.value);\r\n  };\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n  const handleFilterChange = (event) => {\r\n    setToShow(event.target.value);\r\n  };\r\n\r\n  const personsToShow = persons.filter((person) =>\r\n    person.name.toLowerCase().includes(toShow.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Notification message={errMessage} error={true} />\r\n      <Filter value={toShow} onChange={handleFilterChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        addName={addName}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n      {/* <Persons persons={personsToShow} filter={toShow} /> */}\r\n      <div>\r\n        {personsToShow.map((person) => (\r\n          <Person\r\n            key={person.id}\r\n            person={person}\r\n            toggleDelete={() => toggleDeleteOf(person)}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport \"./index.css\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}